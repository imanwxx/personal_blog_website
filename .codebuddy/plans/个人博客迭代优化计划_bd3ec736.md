---
name: 个人博客迭代优化计划
overview: 对imanwxx个人博客进行全面迭代优化，涵盖性能、UI/UX、功能增强、SEO四大方向，包括搜索增强、评论改进、阅读量统计、RSS订阅、分享功能等8项新功能，以及首页、关于我、项目、随笔、时间线5个页面的优化。
design:
  architecture:
    framework: react
    component: shadcn
  fontSystem:
    fontFamily: Inter
    heading:
      size: 48px
      weight: 700
    subheading:
      size: 24px
      weight: 600
    body:
      size: 16px
      weight: 400
  colorSystem:
    primary:
      - "#6464FF"
      - "#9632C8"
      - "#32C896"
    background:
      - "#0A0A1A"
      - "#121228"
      - "#1A1A3E"
    text:
      - "#E0E0FF"
      - "#A0A0C0"
      - "#606080"
    functional:
      - "#FF6B6B"
      - "#4ECB71"
      - "#FFD93D"
todos:
  - id: seo-basics
    content: 创建sitemap.ts、robots.ts和RSS订阅路由，配置全局SEO模板
    status: completed
  - id: perf-optimization
    content: 优化next.config.ts，配置图片优化、代码分割和缓存策略
    status: completed
  - id: home-redesign
    content: 重构首页布局，添加精选文章区和统计数据展示
    status: completed
  - id: search-enhance
    content: 增强搜索功能，支持筛选、搜索历史和热门标签
    status: completed
  - id: comment-system
    content: 改进评论系统，支持回复、Markdown和点赞功能
    status: completed
    dependencies:
      - code-explorer
  - id: view-counter
    content: 实现文章阅读量统计API和显示组件
    status: completed
  - id: share-buttons
    content: 扩展分享功能，添加微信、微博、Twitter分享
    status: completed
  - id: about-enhance
    content: 丰富关于我页面，添加工作经历和教育背景时间线
    status: completed
  - id: timeline-milestone
    content: 时间线页面添加里程碑标记功能
    status: completed
  - id: projects-dynamic
    content: 项目展示改为动态管理，创建项目和随笔管理API
    status: completed
  - id: admin-extend
    content: 扩展管理后台，支持项目和随笔的CRUD管理
    status: completed
    dependencies:
      - projects-dynamic
  - id: structured-data
    content: 添加JSON-LD结构化数据组件，优化文章页SEO
    status: completed
  - id: deploy
    content: 构建并部署到腾讯云服务器
    status: completed
    dependencies:
      - lighthouse
---

## 产品概述

对现有的太空科幻主题个人博客进行全面迭代优化，涵盖性能、UI/UX、功能增强、SEO四大维度，同时改进搜索、评论、阅读统计、RSS订阅、分享等核心功能，并丰富页面内容和后台管理能力。

## 核心功能需求

### 1. 性能优化

- 图片懒加载与WebP格式支持
- 组件代码分割与动态导入
- 静态资源缓存策略优化
- 构建输出优化

### 2. UI/UX优化

- 首页布局重构：精选文章展示 + 最新文章列表
- 关于我页面增强：工作经历时间线、教育背景、社交链接
- 时间线里程碑标记支持
- 页面过渡动画优化

### 3. 功能增强

- 搜索功能增强：支持标签/分类筛选、搜索历史、热门搜索
- 评论系统改进：支持回复、点赞、Markdown语法
- 文章阅读量统计：独立访客统计、阅读时长估算
- RSS订阅：全站RSS和分类RSS
- 文章分享功能：微信、微博、Twitter、复制链接

### 4. SEO优化

- 全站sitemap生成
- robots.txt配置
- 结构化数据标记（JSON-LD）
- Open Graph和Twitter Card优化
- 各页面独立metadata配置

### 5. 后台管理增强

- 项目动态管理（CRUD）
- 随笔后台编辑管理
- 评论审核管理
- 数据统计面板

## 技术栈

- **框架**: Next.js 16.1.6 + React 19.2.3 + TypeScript
- **样式**: Tailwind CSS 4
- **3D效果**: Three.js
- **图标**: lucide-react
- **部署**: Docker + 腾讯云轻量服务器

## 实现方案

### 性能优化策略

1. **图片优化**: 使用Next.js Image组件，配置远程图片域名，启用WebP格式
2. **代码分割**: 3D组件动态导入，减少首屏加载
3. **缓存策略**: 配置API路由缓存，静态页面ISR
4. **构建优化**: 分析包体积，移除未使用依赖

### 搜索增强方案

- 前端搜索索引构建，支持实时过滤
- 搜索历史本地存储
- 热门搜索标签展示
- 搜索结果高亮显示

### 评论系统改进

- 评论嵌套结构支持回复
- 点赞功能（本地存储+API）
- Markdown渲染支持
- 评论审核状态

### 阅读量统计

- 基于localStorage的去重统计
- API记录阅读事件
- 文章页显示阅读数和阅读时长

### RSS生成

- 使用Next.js Route Handlers生成RSS XML
- 支持全站RSS和分类RSS

### SEO实现

- 动态sitemap.ts生成
- robots.ts配置
- 文章页JSON-LD结构化数据
- 完整的Open Graph标签

### 后台管理扩展

- 项目和随笔的数据模型设计
- CRUD API开发
- 管理面板UI扩展

## 架构设计

```
┌─────────────────────────────────────────────────────────────┐
│                        前端层 (Next.js)                       │
├─────────────┬─────────────┬─────────────┬───────────────────┤
│   页面组件   │   UI组件    │   3D可视化   │     自定义Hooks    │
│  (Pages)    │(Components) │   (Three.js)│                   │
├─────────────┴─────────────┴─────────────┴───────────────────┤
│                      API路由层 (API Routes)                   │
├─────────────┬─────────────┬─────────────┬───────────────────┤
│  文章管理   │  评论系统   │  数据统计   │   文件上传        │
│  搜索API    │  RSS生成    │  项目管理   │   随笔管理        │
├─────────────┴─────────────┴─────────────┴───────────────────┤
│                      数据存储层                               │
├─────────────────────────┬───────────────────────────────────┤
│    文件系统 (Markdown)   │      JSON数据文件 (项目/随笔)       │
└─────────────────────────┴───────────────────────────────────┘
```

## 目录结构

```
project-root/
├── app/
│   ├── page.tsx                      [MODIFY] 首页布局优化
│   ├── layout.tsx                    [MODIFY] SEO meta模板
│   ├── about/page.tsx                [MODIFY] 增强个人信息展示
│   ├── timeline/page.tsx             [MODIFY] 添加里程碑标记
│   ├── projects/page.tsx             [MODIFY] 改为动态数据获取
│   ├── essays/page.tsx               [MODIFY] 改为动态数据获取
│   ├── posts/[slug]/page.tsx         [MODIFY] 添加阅读统计、SEO优化
│   ├── rss.xml/route.ts              [NEW] RSS订阅生成
│   ├── sitemap.ts                    [NEW] 站点地图
│   ├── robots.ts                     [NEW] 搜索引擎配置
│   └── api/
│       ├── search/route.ts           [MODIFY] 增强搜索API
│       ├── comments/route.ts         [MODIFY] 支持回复和点赞
│       ├── views/route.ts            [NEW] 阅读量统计API
│       ├── projects/route.ts         [NEW] 项目管理API
│       └── essays/route.ts           [NEW] 随笔管理API
├── components/
│   ├── blog/
│   │   ├── SearchBar.tsx             [MODIFY] 增强搜索功能
│   │   ├── Comments.tsx              [MODIFY] 支持回复和Markdown
│   │   ├── ShareButtons.tsx          [MODIFY] 增加社交分享
│   │   ├── ViewCounter.tsx           [NEW] 阅读量显示组件
│   │   ├── MilestoneMarker.tsx       [NEW] 时间线里程碑组件
│   │   └── StructuredData.tsx        [NEW] JSON-LD组件
│   └── ui/                           [NEW] 通用UI组件库
├── lib/
│   ├── posts.ts                      [MODIFY] 添加阅读统计接口
│   ├── projects.ts                   [NEW] 项目管理工具
│   ├── essays.ts                     [NEW] 随笔管理工具
│   └── utils.ts                      [NEW] 通用工具函数
├── data/                             [NEW] 数据存储目录
│   ├── projects.json
│   ├── essays.json
│   └── views.json
└── next.config.ts                    [MODIFY] 性能优化配置
```

## 关键代码结构

### 阅读量统计接口

```typescript
// lib/views.ts
interface ViewStats {
  slug: string;
  count: number;
  uniqueVisitors: string[]; // IP或指纹哈希
  lastUpdated: string;
}

export async function incrementView(slug: string, visitorId: string): Promise<number>
export async function getViewCount(slug: string): Promise<number>
```

### 评论增强接口

```typescript
// types/comment.ts
interface Comment {
  id: string;
  postId: string;
  author: string;
  content: string;
  date: string;
  parentId?: string;      // 回复功能
  likes: number;          // 点赞数
  status: 'pending' | 'approved'; // 审核状态
}
```

### RSS生成接口

```typescript
// app/rss.xml/route.ts
export async function GET() {
  const posts = await getAllPosts();
  const rss = generateRSS(posts);
  return new Response(rss, {
    headers: { 'Content-Type': 'application/xml' }
  });
}
```

## Agent Extensions

### Integration

**lighthouse**

- **用途**: 部署优化后的网站到腾讯云轻量服务器
- **预期结果**: 网站成功部署到服务器并可通过公网访问

### SubAgent

**code-explorer**

- **用途**: 在大型代码重构过程中搜索和验证代码模式，确保所有相关文件都被正确修改
- **预期结果**: 快速定位需要修改的代码位置，验证重构完整性